PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCwgdmlld3BvcnQtZml0PWNvdmVyLCB1c2VyLXNjYWxhYmxlPW5vIj4KICAgIDx0aXRsZT5aZW4gRmVlZHMgfCBEYWlseSBNaW5kZnVsIE1vbWVudHM8L3RpdGxlPgogICAgPGxpbmsgcmVsPSJwcmVjb25uZWN0IiBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tIj4KICAgIDxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbSIgY3Jvc3NvcmlnaW4+CiAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUludGVyOndnaHRANDAwOzYwMCZmYW1pbHk9UGxheWZhaXIrRGlzcGxheTppdGFsLHdnaHRAMCw3MDA7MSw3MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgogICAgPHN0eWxlPgogICAgICAgICogewogICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgfQoKICAgICAgICBib2R5IHsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47CiAgICAgICAgfQoKICAgICAgICAvKiBHcmlkIFZpZXcgKi8KICAgICAgICAuZ3JpZC1jb250YWluZXIgewogICAgICAgICAgICBwYWRkaW5nOiAxNnB4OwogICAgICAgICAgICBwYWRkaW5nLXRvcDogODBweDsKICAgICAgICAgICAgbWF4LXdpZHRoOiAxMjAwcHg7CiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICAgIH0KCiAgICAgICAgLmhlYWRlciB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICBsZWZ0OiAwOwogICAgICAgICAgICByaWdodDogMDsKICAgICAgICAgICAgei1pbmRleDogMTAwOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOTUpOwogICAgICAgICAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCk7CiAgICAgICAgICAgIHBhZGRpbmc6IDE2cHggMjRweDsKICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmMGYwZjA7CiAgICAgICAgfQoKICAgICAgICBoMSB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnUGxheWZhaXIgRGlzcGxheScsIHNlcmlmOwogICAgICAgICAgICBmb250LXNpemU6IDI0cHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAtMC41cHg7CiAgICAgICAgfQoKICAgICAgICBzdWJ0aXRsZSB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsKICAgICAgICAgICAgY29sb3I6ICM2NjY7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDRweDsKICAgICAgICB9CgogICAgICAgIC8qIENhdGVnb3J5IFRhYnMgKi8KICAgICAgICAudGFicyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogOHB4OwogICAgICAgICAgICBtYXJnaW4tdG9wOiAxMnB4OwogICAgICAgICAgICBvdmVyZmxvdy14OiBhdXRvOwogICAgICAgICAgICBzY3JvbGxiYXItd2lkdGg6IG5vbmU7CiAgICAgICAgfQoKICAgICAgICAudGFiIHsKICAgICAgICAgICAgcGFkZGluZzogNnB4IDE0cHg7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgYmFja2dyb3VuZDogbm9uZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4OwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4yczsKICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICB9CgogICAgICAgIC50YWIuYWN0aXZlIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzMzMzsKICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgfQoKICAgICAgICAvKiBHcmlkIExheW91dCAqLwogICAgICAgIC5ncmlkIHsKICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsKICAgICAgICAgICAgZ2FwOiAxNnB4OwogICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgICAgIH0KCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDYwMHB4KSB7CiAgICAgICAgICAgIC5ncmlkIHsKICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKiBHcmlkIEl0ZW0gKi8KICAgICAgICAuZ3JpZC1pdGVtIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y5ZjlmOTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4yczsKICAgICAgICB9CgogICAgICAgIC5ncmlkLWl0ZW06YWN0aXZlIHsKICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjk2KTsKICAgICAgICB9CgogICAgICAgIC5ncmlkLWltZyB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDI1MHB4OwogICAgICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgfQoKICAgICAgICAuZ3JpZC1pbmZvIHsKICAgICAgICAgICAgcGFkZGluZzogMTJweDsKICAgICAgICB9CgogICAgICAgIC5ncmlkLWF1dGhvciB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgY29sb3I6ICM5OTk7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDsKICAgICAgICB9CgogICAgICAgIC5ncmlkLXRpdGxlIHsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdQbGF5ZmFpciBEaXNwbGF5Jywgc2VyaWY7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsKICAgICAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgICAgICAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMjsKICAgICAgICAgICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICB9CgogICAgICAgIC8qIE1vZGFsIC0gSW1hZ2UgVmlld2VyICovCiAgICAgICAgLm1vZGFsIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDA7CiAgICAgICAgICAgIHotaW5kZXg6IDEwMDA7CiAgICAgICAgICAgIG9wYWNpdHk6IDA7CiAgICAgICAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjsKICAgICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzOwogICAgICAgIH0KCiAgICAgICAgLm1vZGFsLmFjdGl2ZSB7CiAgICAgICAgICAgIG9wYWNpdHk6IDE7CiAgICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2libGU7CiAgICAgICAgfQoKICAgICAgICAvKiBIb3Jpem9udGFsIFN3aXBlIChQaG90byBWaWV3KSAqLwogICAgICAgIC5waG90by12aWV3ZXIgewogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgb3ZlcmZsb3cteDogYXV0bzsKICAgICAgICAgICAgc2Nyb2xsLXNuYXAtdHlwZTogeCBwcm94aW1pdHk7CiAgICAgICAgICAgIHNjcm9sbC1iZWhhdmlvcjogc21vb3RoOwogICAgICAgICAgICBzY3JvbGwtc25hcC10eXBlOiBtYW5kYXRvcnk7CiAgICAgICAgfQoKICAgICAgICAucGhvdG8tc2xpZGUgewogICAgICAgICAgICBtaW4td2lkdGg6IDEwMCU7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgfQoKICAgICAgICAucGhvdG8tc2xpZGUgaW1nIHsKICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMDB2aDsKICAgICAgICAgICAgb2JqZWN0LWZpdDogY29udGFpbjsKICAgICAgICB9CgogICAgICAgIC8qIFBob3RvIEluZm8gT3ZlcmxheSAqLwogICAgICAgIC5waG90by1pbmZvIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICBib3R0b206IDQwcHg7CiAgICAgICAgICAgIGxlZnQ6IDIwcHg7CiAgICAgICAgICAgIHJpZ2h0OiAyMHB4OwogICAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICB0ZXh0LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC41KTsKICAgICAgICB9CgogICAgICAgIC5waG90by10aXRsZSB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnUGxheWZhaXIgRGlzcGxheScsIHNlcmlmOwogICAgICAgICAgICBmb250LXNpemU6IDI0cHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDsKICAgICAgICB9CgogICAgICAgIC5waG90by1zdW1tYXJ5IHsKICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgICAgICBvcGFjaXR5OiAwLjk7CiAgICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgICAgICB9CgogICAgICAgIC5waG90by1oaW50IHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICBib3R0b206IDIwcHg7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHJpZ2h0OiAwOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgIG9wYWNpdHk6IDAuNjsKICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuNSk7CiAgICAgICAgfQoKICAgICAgICAvKiBDbG9zZSBCdXR0b24gKi8KICAgICAgICAuY2xvc2UtYnRuIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICB0b3A6IDQwcHg7CiAgICAgICAgICAgIGxlZnQ6IDIwcHg7CiAgICAgICAgICAgIHotaW5kZXg6IDEwMDI7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4yKTsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4OwogICAgICAgICAgICB3aWR0aDogNDRweDsKICAgICAgICAgICAgaGVpZ2h0OiA0NHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgfQoKICAgICAgICAvKiBBcnRpY2xlIFZpZXcgKi8KICAgICAgICAuYXJ0aWNsZS12aWV3IHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICB0b3A6IDEwMCU7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHggMjBweCAwIDA7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZTsKICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bzsKICAgICAgICAgICAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoOwogICAgICAgIH0KCiAgICAgICAgLmFydGljbGUtdmlldy5hY3RpdmUgewogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwMCUpOwogICAgICAgIH0KCiAgICAgICAgLmFydGljbGUtaGVhZGVyIHsKICAgICAgICAgICAgcG9zaXRpb246IHN0aWNreTsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2YwZjBmMDsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgIH0KCiAgICAgICAgLmJhY2stYnRuIHsKICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiBub25lOwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICB9CgogICAgICAgIC5hcnRpY2xlLWNvbnRlbnQgewogICAgICAgICAgICBwYWRkaW5nOiAyNHB4OwoJCglwYWRkaW5nLWJvdHRvbTogNjBweDsKICAgICAgICB9CgogICAgICAgIC5hcnRpY2xlLWhlYWRsaW5lIHsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdQbGF5ZmFpciBEaXNwbGF5Jywgc2VyaWY7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjRweDsKICAgICAgICB9CgogICAgICAgIC5hcnRpY2xlLWJvZHkgewogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjg7CiAgICAgICAgICAgIGNvbG9yOiAjNDQ0OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMnB4OwogICAgICAgIH0KCiAgICAgICAgLmFydGljbGUtYm9keSBwIHsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMThweDsKICAgICAgICB9CgogICAgICAgIC50aXBzLXdyYXBwZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjlmOWY5OwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4OwogICAgICAgICAgICBtYXJnaW4tdG9wOiAzMnB4OwogICAgICAgIH0KCiAgICAgICAgLnRpcHMtdGl0bGUgewogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgICAgIGNvbG9yOiAjNjY2OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOwogICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMXB4OwogICAgICAgIH0KCiAgICAgICAgLnRpcHMtbGlzdCB7CiAgICAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7CiAgICAgICAgfQoKICAgICAgICAudGlwcy1saXN0IGxpIHsKICAgICAgICAgICAgZm9udC1zaXplOiAxNXB4OwogICAgICAgICAgICBsaW5lLWhlaWdodDogMS44OwogICAgICAgICAgICBwYWRkaW5nOiA4cHggMDsKICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDI0cHg7CiAgICAgICAgICAgIGNvbG9yOiAjNTU1OwogICAgICAgIH0KCiAgICAgICAgLnRpcHMtbGlzdCBsaTpiZWZvcmUgewogICAgICAgICAgICBjb250ZW50OiDigJMnOwogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgIH0KCiAgICAgICAgLyogUHJvZ3Jlc3MgSW5kaWNhdG9yICovCiAgICAgICAgLnByb2dyZXNzLWJhciB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICBsZWZ0OiAwOwogICAgICAgICAgICBoZWlnaHQ6IDJweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjMpOwogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICB9CgogICAgICAgIC5wcm9ncmVzcy1maWxsIHsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOwogICAgICAgICAgICB3aWR0aDogMDsKICAgICAgICAgICAgdHJhbnNpdGlvbjogd2lkdGggMC4yczsgfQoKICAgICAgICAvKiBTd2lwZSBIaW50cyAqLwogICAgICAgIC5zd2lwZS1oaW50LWxlZnQsIC5zd2lwZS1oaW50LXJpZ2h0IHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICB0b3A6IDUwJTsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOwogICAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgICAgZm9udC1zaXplOiAzMnB4OwogICAgICAgICAgICBvcGFjaXR5OiAwLjM7CiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICAgICAgICB0ZXh0LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC41KTsKICAgICAgICB9CgogICAgICAgIC5zd2lwZS1oaW50LWxlZnQgewogICAgICAgICAgICBsZWZ0OiAxMHB4OwogICAgICAgIH0KCiAgICAgICAgLnN3aXBlLWhpbnQtcmlnaHQgewogICAgICAgICAgICByaWdodDogMTBweDsKICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPCEtLSBHcmlkIFZpZXcgLS0+CiAgICA8ZGl2IGNsYXNzPSJoZWFkZXIiPgogICAgICAgIDxoMT5aZW4gRmVlZHM8L2gxPgogICAgICAgIDxwIGNsYXNzPSJzdWJ0aXRsZSI+RGFpbHkgTWluZGZ1bCBNb21lbnRzPC9wPgogICAgICAgIDxuYXYgY2xhc3M9InRhYnMiIGlkPSJ0YWJzIj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiIGFjdGl2ZSIgZGF0YS1jYXRlZ29yeT0iYWxsIj5BbGw8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiIiBkYXRhLWNhdGVnb3J5PSJuYXR1cmUiPuCfjL8gTmF0dXJlPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InRhYiIgZGF0YS1jYXRlZ29yeT0iZm9vZCI+8J+NtSBGb29kPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InRhYiIgZGF0YS1jYXRlZ29yeT0idHJhdmVsIj7wn4+UIFRyYXZlbDwvYnV0dG9uPgogICAgICAgIDwvbmF2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0iZ3JpZC1jb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9ImdyaWQiIGlkPSJncmlkIj4KICAgICAgICAgICAgPCEtLSBJdGVtcyB3aWxsIGJlIGluamVjdGVkIGhlcmUgLS0+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8IS0tIE1vZGFsIFZpZXdlciAtLT4KICAgIDxkaXYgY2xhc3M9Im1vZGFsIiBpZD0ibW9kYWwiPgogICAgICAgIDxidXR0b24gY2xhc3M9ImNsb3NlLWJ0biIgb25jbGljaz0iY2xvc2VNb2RhbCgpIj7DlzwvYnV0dG9uPgogICAgICAgIAogICAgICAgIDxkaXYgY2xhc3M9InN3aXBlLWhpbnQtbGVmdCI+4oeSPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic3dpcGUtaGludC1yaWdodCI+4oeTPC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0icGhvdG8tdmlld2VyIiBpZD0icGhvdG8tdmlld2VyIj4KICAgICAgICAgICAgPCEtLSBTbGlkZXMgaW5qZWN0ZWQgaGVyZSAtLT4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdiBjbGFzcz0iYXJ0aWNsZS12aWV3IiBpZD0iYXJ0aWNsZS12aWV3Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXJ0aWNsZS1oZWFkZXIiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYmFjay1idG4iIG9uY2xpY2s9ImNsb3NlQXJ0aWNsZSgpIj7DlzwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHNwYW4+QXJ0aWNsZTwvc3Bhbj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9IndpZHRoOiAzMnB4Ij48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFydGljbGUtY29udGVudCIgaWQ9ImFydGljbGUtY29udGVudCI+CiAgICAgICAgICAgICAgICA8IS0tIEFydGljbGUgY29udGVudCBpbmplY3RlZCBoZXJlIC0tPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxzY3JpcHQ+CiAgICAgICAgbGV0IGZlZWRzRGF0YSA9IHt9OwogICAgICAgIGxldCBhbGxQb3N0cyA9IFtdOwogICAgICAgIGxldCBmaWx0ZXJlZFBvc3RzID0gW107CiAgICAgICAgbGV0IGN1cnJlbnRJbmRleCA9IDA7CiAgICAgICAgbGV0IGlzTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICBhc3luYyBmdW5jdGlvbiBpbml0KCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2ZlZWRzLmpzb24nKTsKICAgICAgICAgICAgICAgIGZlZWRzRGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICAgICAgICAgICAgICBhbGxQb3N0cyA9IE9iamVjdC52YWx1ZXMoZmVlZHNEYXRhKTsKICAgICAgICAgICAgICAgIGFsbFBvc3RzLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGZpbHRlcmVkUG9zdHMgPSBbLi4uYWxsUG9zdHNdOwogICAgICAgICAgICAgICAgcmVuZGVyR3JpZCgpOwogICAgICAgICAgICAgICAgc2V0dXBUYWJzKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGZlZWRzOicsIGUpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzZXR1cFRhYnMoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWInKS5mb3JFYWNoKHRhYiA9PiB7CiAgICAgICAgICAgICAgICB0YWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYicpLmZvckVhY2godCA9PiB0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgICAgICAgICAgICAgICB0YWIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2F0ID0gdGFiLmRhdGFzZXQuY2F0ZWdvcnk7CiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRQb3N0cyA9IGNhdCA9PT0gJ2FsbCcgPyBbLi4uYWxsUG9zdHNdIDogYWxsUG9zdHMuZmlsdGVyKHAgPT4gcC5jYXRlZ29yeSA9PT0gY2F0KTsKICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZFBvc3RzLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7CiAgICAgICAgICAgICAgICAgICAgcmVuZGVyR3JpZCgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVuZGVyR3JpZCgpIHsKICAgICAgICAgICAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmlkJyk7CiAgICAgICAgICAgIGdyaWQuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIAogICAgICAgICAgICBmaWx0ZXJlZFBvc3RzLmZvckVhY2goKHBvc3QsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTmFtZSA9ICdncmlkLWl0ZW0nOwogICAgICAgICAgICAgICAgaXRlbS5vbmNsaWNrID0gKCkgPT4gb3Blbk1vZGFsKGluZGV4KTsKICAgICAgICAgICAgICAgIGl0ZW0uaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9ImdyaWQtaW1nIiBzcmM9IiR7cG9zdC51cmx9IiBsb2FkaW5nPSJsYXp5IiBhbHQ9IiR7cG9zdC50aXRsZX0iIG9uZXJyb3I9InRoaXMuc3JjPSdkYXRhOmltYWdlL3N2Zyt4bWwsPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI0MDBcIiBoZWlnaHQ9XCIyNTBcIj48cmVjdCBmaWxsPVwiI2VlZVwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIi8+PC9zdmc+JyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZC1pbmZvIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZC1hdXRob3IiPmJ5ICR7cG9zdC5hdXRob3J9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtdGl0bGUiPiR7cG9zdC50aXRsZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICBncmlkLmFwcGVuZENoaWxkKGl0ZW0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG9wZW5Nb2RhbChpbmRleCkgewogICAgICAgICAgICBjdXJyZW50SW5kZXggPSBpbmRleDsKICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwnKTsKICAgICAgICAgICAgY29uc3Qgdmlld2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bob3RvLXZpZXdlcicpOwogICAgICAgICAgICBjb25zdCBhcnRpY2xlVmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcnRpY2xlLXZpZXcnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGFydGljbGVWaWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgICAgICAgICAKICAgICAgICAgICAgdmlld2VyLmlubmVySFRNTCA9IGZpbHRlcmVkUG9zdHMubWFwKChwb3N0LCBpKSA9PiBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwaG90by1zbGlkZSIgb25jbGljaz0idG9nZ2xlQXJ0aWNsZSgpIj4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHtwb3N0LnVybH0iIGFsdD0iJHtwb3N0LnRpdGxlfSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGhvdG8taW5mbyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBob3RvLXRpdGxlIj4ke3Bvc3QudGl0bGV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBob3RvLXN1bW1hcnkiPiR7cG9zdC5zdW1tYXJ5fTwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBob3RvLWhpbnQiPuKcluKXj+KcluaJk+KcluKXjzwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGApLmpvaW4oJycpOwogICAgICAgICAgICAKICAgICAgICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdmlld2VyLnNjcm9sbExlZnQgPSBpbmRleCAqIHdpbmRvdy5pbm5lcldpZHRoOwogICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbG9zZU1vZGFsKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGUtdmlldycpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJyc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB0b2dnbGVBcnRpY2xlKCkgewogICAgICAgICAgICBjb25zdCBhcnRpY2xlVmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcnRpY2xlLXZpZXcnKTsKICAgICAgICAgICAgY29uc3QgcG9zdCA9IGZpbHRlcmVkUG9zdHNbY3VycmVudEluZGV4XTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICghYXJ0aWNsZVZpZXcuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgewogICAgICAgICAgICAgICAgbGV0IHRpcHNVcHBlciA9ICcnOwogICAgICAgICAgICAgICAgaWYgKHBvc3QuYXJ0aWNsZSAmJiBwb3N0LmFydGljbGUudGlwcykgewogICAgICAgICAgICAgICAgICAgIHRpcHNVcHBlciA9ICcKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGlwcy13cmFwcGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRpcHMtdGl0bGUiPlRpcHM8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0idGlwcy1saXN0Ij4nICsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0LmFydGljbGUudGlwcy5tYXAodGlwID0+IGA8bGk+JHt0aXB9PC9saT5gKS5qb2luKCcnKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC91bD48L2Rpdj4nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJ0aWNsZS1jb250ZW50JykuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFydGljbGUtaGVhZGxpbmUiPiR7cG9zdC5hcnRpY2xlID8gcG9zdC5hcnRpY2xlLmhlYWRsaW5lIDogcG9zdC50aXRsZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhcnRpY2xlLWJvZHkiPiR7cG9zdC5hcnRpY2xlID8gcG9zdC5hcnRpY2xlLmNvbnRlbnQucmVwbGFjZSgvXFxuXFxuL2csICc8L3A+PHA+JykgOiBwb3N0LnN1bW1hcnl9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgJHt0aXBzVXBwZXJ9CiAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgYXJ0aWNsZVZpZXcuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhcnRpY2xlVmlldy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xvc2VBcnRpY2xlKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJ0aWNsZS12aWV3JykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICAgICAgfQoKICAgICAgICAvLyBTd2lwZSBoYW5kbGluZwogICAgICAgIGxldCBzdGFydFggPSAwOwogICAgICAgIGxldCBzdGFydFkgPSAwOwogICAgICAgIGxldCBpc1N3aXBpbmcgPSBmYWxzZTsKICAgICAgICBsZXQgaXNIb3Jpem9udGFsID0gbnVsbDsKICAgICAgICBsZXQgaXNBcnRpY2xlT3BlbiA9IGZhbHNlOwoKICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbCcpOwogICAgICAgIGNvbnN0IHZpZXdlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaG90by12aWV3ZXInKTsKICAgICAgICBjb25zdCBhcnRpY2xlVmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcnRpY2xlLXZpZXcnKTsKCiAgICAgICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIChlKSA9PiB7CiAgICAgICAgICAgIHN0YXJ0WCA9IGUudG91Y2hlc1swXS5jbGllbnRYOwogICAgICAgICAgICBzdGFydFkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTsKICAgICAgICAgICAgaXNTd2lwaW5nID0gdHJ1ZTsKICAgICAgICAgICAgaXNIb3Jpem9udGFsID0gbnVsbDsKICAgICAgICAgICAgaXNBcnRpY2xlT3BlbiA9IGFydGljbGVWaWV3LmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJyk7CiAgICAgICAgfSwgeyBwYXNzaXZlOiB0cnVlIH0pOwoKICAgICAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCAoZSkgPT4gewogICAgICAgICAgICBpZiAoIWlzU3dpcGluZykgcmV0dXJuOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgZGVsdGFYID0gZS50b3VjaGVzWzBdLmNsaWVudFggLSBzdGFydFg7CiAgICAgICAgICAgIGNvbnN0IGRlbHRhWSA9IGUudG91Y2hlc1swXS5jbGllbnRZIC0gc3RhcnRZOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKGlzSG9yaXpvbnRhbCA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgaXNIb3Jpem9udGFsID0gTWF0aC5hYnMoZGVsdGFYKSID0gTWF0aC5hYnMoZGVsdGFZKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQXJ0aWNsZSBtb2RlIC0gb25seSB2ZXJ0aWNhbAogICAgICAgICAgICBpZiAoaXNBcnRpY2xlT3BlbikgewogICAgICAgICAgICAgICAgaWYgKGRlbHRhWSA+IDUwICYmIGV2ZW50LmNhbmNlbGFibGUpIHsKICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfSwgeyBwYXNzaXZlOiB0cnVlIH0pOwoKICAgICAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIChlKSA9PiB7CiAgICAgICAgICAgIGlmICghaXNTd2lwaW5nKSByZXR1cm47CiAgICAgICAgICAgIGlzU3dpcGluZyA9IGZhbHNlOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgZGVsdGFYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYIC0gc3RhcnRYOwogICAgICAgICAgICBjb25zdCBkZWx0YVkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkgLSBzdGFydFk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoaXNBcnRpY2xlT3BlbikgewogICAgICAgICAgICAgICAgLy8gQXJ0aWNsZSBtb2RlIC0gc3dpcGUgZG93biB0byBjbG9zZQogICAgICAgICAgICAgICAgaWYgKGRlbHRhWSA+IDEwMCkgewogICAgICAgICAgICAgICAgICAgIGNsb3NlQXJ0aWNsZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBQaG90byBtb2RlCiAgICAgICAgICAgIGlmIChpc0hvcml6b250YWwgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICBpZiAoZGVsdGFYIDwgLTUwKSB7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudEluZGV4ID0gTWF0aC5taW4oY3VycmVudEluZGV4ICsgMSwgZmlsdGVyZWRQb3N0cy5sZW5ndGggLSAxKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVsdGFYID4gNTApIHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50SW5kZXggPSBNYXRoLm1heChjdXJyZW50SW5kZXggLSAxLCAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZpZXdlci5zY3JvbGxUbih7IGxlZnQ6IGN1cnJlbnRJbmRleCAqIHdpbmRvdy5pbm5lcldpZHRoLCBiZWhhdmlvcjogJ3Ntb290aCcgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBWZXJ0aWNhbCBzd2lwZSAtIG9wZW4gYXJ0aWNsZQogICAgICAgICAgICAgICAgaWYgKGRlbHRhWSA8IC0xMDApIHsKICAgICAgICAgICAgICAgICAgICB0b2dnbGVBcnRpY2xlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LCB7IHBhc3NpdmU6IHRydWUgfSk7CgogICAgICAgIC8vIEtleWJvYXJkIG5hdmlnYXRpb24KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHsKICAgICAgICAgICAgaWYgKCFtb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSByZXR1cm47CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7CiAgICAgICAgICAgICAgICBpZiAoYXJ0aWNsZVZpZXcuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgewogICAgICAgICAgICAgICAgICAgIGNsb3NlQXJ0aWNsZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjbG9zZU1vZGFsKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzQXJ0aWNsZU9wZW4pIHsKICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0Fycm93UmlnaHQnKSB7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudEluZGV4ID0gTWF0aC5taW4oY3VycmVudEluZGV4ICsgMSwgZmlsdGVyZWRQb3N0cy5sZW5ndGggLSAxKTsKICAgICAgICAgICAgICAgICAgICB2aWV3ZXIuc2Nyb2xsVG8oeyBsZWZ0OiBjdXJyZW50SW5kZXggKiB3aW5kb3cuaW5uZXJXaWR0aCwgYmVoYXZpb3I6ICdzbW9vdGgnIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93TGVmdCcpIHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50SW5kZXggPSBNYXRoLm1heChjdXJyZW50SW5kZXggLSAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2aWV3ZXIuc2Nyb2xsVG8oeyBsZWZ0OiBjdXJyZW50SW5kZXggKiB3aW5kb3cuaW5uZXJXaWR0aCwgYmVoYXZpb3I6ICdzbW9vdGgnIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93VXAnKSB7CiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQXJ0aWNsZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGluaXQoKTsKICAgIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4K